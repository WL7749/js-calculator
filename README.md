# JavaScript Calculator
一个使用纯原生技术栈实现的现代风格计算器，具备完整的基础运算功能和良好的交互体验，无任何前端框架依赖。

## 技术栈
| 技术 | 说明 |
|------|------|
| HTML5 | 语义化页面结构，构建计算器基础布局 |
| CSS3 + Tailwind CSS v3 | 快速构建响应式UI，自定义工具类实现样式复用，使用过渡动画提升交互体验 |
| 原生JavaScript (ES6+) | 实现核心计算逻辑、事件处理、状态管理，无任何框架/库依赖 |

## 核心功能
1. **基础运算**：支持加、减、乘、除、取余（%）等基本算术运算
2. **连续计算**：支持多步连续运算（如 `10+5-3×2=`），自动保留上一次计算结果作为新的操作数
3. **交互方式**：
   - 鼠标点击按钮操作
   - 全键盘支持（数字键、运算符键、Enter/=、Backspace、Escape等）
4. **实用功能**：
   - 清除（C）：重置所有计算状态
   - 删除（←）：逐位删除输入的数字/运算符
   - 小数点输入：自动处理重复小数点问题
5. **用户体验**：
   - 操作反馈：按钮点击有缩放+阴影变化动画，数字变化有放大过渡效果
   - 历史记录：显示上一步计算过程（如 `10 + 5 =`）
   - 错误处理：检测并显示除以零的错误提示
6. **响应式设计**：适配移动端（手机）和桌面端（PC），布局自动适配不同屏幕尺寸

##  实现难点与解决方案
### 1. 计算状态管理（核心难点）
- **问题**：计算器需要维护多状态（第一个操作数、当前运算符、等待第二个操作数、当前显示值），连续运算时状态切换容易出错
- **解决方案**：设计单一状态对象统一管理所有计算状态：
  ```javascript
  const calculator = {
    displayValue: '0',       // 当前显示值
    firstOperand: null,      // 第一个操作数
    waitingForSecondOperand: false, // 是否等待输入第二个操作数
    operator: null,          // 当前选中的运算符
    history: ''              // 计算历史记录
  };
  ```
  通过 `waitingForSecondOperand` 标记位精准控制操作数输入逻辑，避免连续输入运算符或重复计算的问题。

### 2. 边界情况处理
- **问题**：用户可能输入非法内容（如重复小数点、除以零、空值运算）
- **解决方案**：
  - 小数点输入前先检查当前显示值是否已包含小数点
  - 除法运算时判断第二个操作数是否为0，若为0则显示 "Error"
  - 删除操作到最后一位时自动重置为0，避免空值显示

### 3. 键盘事件兼容
- **问题**：不同键盘布局/浏览器的按键事件行为不一致，易触发默认行为（如输入到其他元素）
- **解决方案**：
  - 对所有键盘事件调用 `event.preventDefault()` 阻止默认行为
  - 使用正则匹配数字键，统一映射运算符键（如 `*`/`×`、`/`/`÷`）
  - 映射功能键（Escape=清除、Backspace=删除、Enter=等于）

### 4. 动画与交互流畅性
- **问题**：动画效果可能导致布局抖动或响应延迟
- **解决方案**：
  - 使用 CSS `transition` 而非 `animation` 实现轻量级过渡
  - 数字变化动画通过短暂添加/移除 `scale-105` 类实现，200ms后自动还原，避免阻塞主线程

##  快速开始
1. 克隆本仓库：
   ```bash
   git clone https://github.com/[WL7749]/js-calculator.git
   ```
2. 进入项目目录，直接打开 `index.html` 文件即可运行（无需构建/依赖安装）

##  许可证
本项目基于 MIT 许可证开源，你可以自由修改、分发和使用。
